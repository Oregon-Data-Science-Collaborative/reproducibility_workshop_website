<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>shell_intro.knit.md</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<link rel="icon" href="https://github.com/workflowr/workflowr-assets/raw/master/img/reproducible.png">
<!-- Add a small amount of space between sections. -->
<style type="text/css">
div.section {
  padding-top: 12px;
}
</style>



<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>





<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Reproducible Research</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">About</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Modules
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="research_workflow.html">Module 1: Reproducible Workflows</a>
    </li>
    <li>
      <a href="shell_intro.html">Module 2: Working in the shell</a>
    </li>
    <li>
      <a href="git_intro.html">Module 3: Version control with Git</a>
    </li>
    <li class="dropdown-header">Module 4: Collaboration with GitHub</li>
  </ul>
</li>
<li>
  <a href="resources.html">Resources</a>
</li>
<li>
  <a href="install.html">Installation</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/lillian-aoki/workshop_website">
    <span class="fa fa-github"></span>
     
    Source code
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">




</div>


<div id="working-in-the-shell" class="section level2">
<h2>Working in the shell</h2>
<p>Working in the shell is a succinct way to navigate files and run programs,<br />
is fundamental for some advanced computing tasks, and is increasingly used for<br />
analysis of big data across fields. This tutorial gives a brief introduction to<br />
working in the shell, taught as part of a Reproducible Research workshop series<br />
at the University of Oregon.</p>
<div id="learning-objectives" class="section level3">
<h3>Learning objectives</h3>
<p>The target audience for this module is a researcher with little to no experience<br />
using the shell/command line. During the workshop, participants will</p>
<ul>
<li>Gain basic familiarity with the shell and learn to run commands</li>
<li>Practice navigating the filesystem using the shell</li>
<li>Practice manipulating files and directories (moving, copying, locking)</li>
</ul>
<p>This tutorial serves as a reference and supplement to in-person learning.</p>
</div>
<div id="acknowledgements-and-resources" class="section level3">
<h3>Acknowledgements and resources</h3>
<p>This lesson is adapted in part from the <a href="https://swcarpentry.github.io/shell-novice/">Software Carpentries</a> and <a href="https://datacarpentry.org/shell-genomics/">Data Carpentries</a> lessons.</p>
</div>
</div>
<div id="getting-started" class="section level2">
<h2>Getting started</h2>
<p>When you open the shell, you will see some <strong>text</strong> followed by a <strong>prompt symbol</strong> and a <strong>cursor</strong>.</p>
<p>The text indicates your user name and the working directory (the folder you are working in).</p>
<p>The prompt symbol is often a <code>$</code> but may also be a <code>%</code> depending on the shell you are using.</p>
<p>The cursor indicates where you can begin typing commands.</p>
<p>After you type a command, hit the <kbd>Enter</kbd> key to run the command.</p>
<p>The command <code>echo</code> will display a line of text. If you type the following and hit enter</p>
<p><code>$ echo hello!</code></p>
<p>you should see the <strong>output</strong> on the next line as</p>
<p><code>hello!</code></p>
<p class="text-success">
Note, in this documentation, the <code>$</code> prompt is included but you don’t need to type the<br />
prompt itself, just the commands that follow it.
</p>
<div id="a-few-basic-commands" class="section level3">
<h3>A few basic commands</h3>
<p><code>pwd</code> prints the working directory (the folder you are working in)</p>
<p><code>ls</code> returns a list of files in the current (working) directory</p>
<p><code>clear</code> will scroll up your screen to give you a clean space to work it. This makes it<br />
easier to read, but you can still scroll up to see your previous work.</p>
<p>Try running <code>ls</code> to see the files in your current directory.</p>
</div>
<div id="options-and-documentation" class="section level3">
<h3>Options and documentation</h3>
<p>When you run a command, you can add <strong>options</strong> (also known as <strong>flags</strong>) to modify the output.</p>
<p>For example, use the option <code>-l</code> for the command <code>ls</code> to display more information.</p>
<p><code>$ ls -l</code></p>
<p>To find out what options are available for a command, access the manual (i.e. the <strong>documentation</strong>)<br />
by running <code>man</code> and the command:</p>
<p><code>$ man ls</code></p>
<p>gives as output the manual for the <code>ls</code> command.</p>
<p>You can navigate through the manual using the <kbd>↑</kbd> and <kbd>↓</kbd> arrow keys, <kbd>page up</kbd> and <kbd>page down</kbd>, or <kbd>space</kbd> and <kbd>B</kbd>.</p>
<p>Type <kbd>Q</kbd> to quit the manual.</p>
<p class="text-success">
Note, on a Windows machine running Git Bash, you may need to use the <code>--help</code> option instead of <code>man</code> to access documentation.
</p>
</div>
<div id="environment-variables" class="section level3">
<h3>Environment variables</h3>
<p><strong>Environment variables</strong> are pieces of information that are stored in your shell session.<br />
Variables start with <code>$</code>, e.g. the variable <code>$USER</code> identifies the user (you).</p>
<p>Access variables individually using the echo command:</p>
<p><code>$ echo $USER</code></p>
<p>returns your username.</p>
<p>You can access all environment variables using <code>env</code> and you can set environment variables using <code>export</code>.</p>
<p><code>$ export greeting=hello</code></p>
<p>returns no output to the console but saves the variable value. Access the new value with the <code>echo</code> command:</p>
<p><code>$ echo $greeting</code></p>
<p>Exiting and opening a new session of the shell will reset the variables.</p>
</div>
</div>
<div id="navigating-files-and-directories" class="section level2">
<h2>Navigating files and directories</h2>
<p>You may be used to navigating the file system using Finder or Windows Explorer.</p>
<p>The command line provides an alternative way to navigate the files stored on<br />
your computer. Individual files are organized within <strong>directories</strong> (aka folders),<br />
and directories are organized hierarchically. For example, your Desktop may contain<br />
several files and folders, and within those folders there may be additional subfolders.<br />
If you downloaded the <a href="">data files</a> for this tutorial, you have a folder called<br />
<code>shell_intro</code> on your Desktop, which contains additional subfolders and files.</p>
<p>You already used <code>pwd</code> to print the working directory - where you are in the<br />
filesystem. Most likely, your default directory is <code>/Users/[my username]</code> on a Mac.<br />
On a Windows machine, it may be something like <code>C:\Users\[my username]</code>.</p>
<p>A key command to navigate the filesystem is <code>cd</code> - change directory.</p>
<p><code>$ cd ~/Desktop/shell_intro</code></p>
<p>will change your working directory to the shell_intro directory on your Desktop.</p>
<p>Run <code>ls</code> after you move into a new directory to see the sub-folders and files.</p>
<p>You can move further into the sub-folders by running <code>cd</code> again:</p>
<p><code>$ cd data</code></p>
<p>And you can navigate ‘up’ in the file system using <code>..</code> to move one level up (from<br />
<code>data</code> back up to <code>shell_intro</code>, the parent directory of <code>data</code>)</p>
<p>To return to your home (default) directory, you can type the absolute file path,<br />
e.g. <code>cd /Users/[my username]</code> or you can use a short-cut with the HOME environment variable:</p>
<p><code>$ cd $HOME</code></p>
<p>will take you back to your home directory.</p>
<div id="some-other-shortcuts" class="section level3">
<h3>Some other shortcuts</h3>
<p>The <code>~</code> (tilde) stands for the home directory, so <code>~/Desktop</code> is equivalent to<br />
<code>/Users/[my username]/Desktop</code></p>
<p>The <code>.</code> stands for the current directory.</p>
<p>Running <code>cd</code> without a path specified will also take you to the home directory.</p>
<p>Running <code>cd -</code> (dash) will take you to the previous directory you were in - not<br />
‘up’ the file system, but backwards in time to the last directory you were in.</p>
<p>Tab completion can make writing paths easier. As you type the name of a directory,<br />
you can hit <kbd>Tab</kbd> once and the shell will auto-complete the name, if<br />
there is only one option. If there is more than one option (e.g. more than one<br />
file in a folder), hit <kbd>Tab</kbd> a second time to display the possibilities</p>
</div>
</div>
<div id="manipulating-files-and-directories" class="section level2">
<h2>Manipulating files and directories</h2>
<div id="viewing-files" class="section level3">
<h3>Viewing files</h3>
<p>From the home directory, you can use <code>cd</code> to change the working directory to<br />
<code>shell_intro</code> and <code>ls</code> to look at the contents of the new working directory. Use<br />
the option <code>-F</code> with <code>ls</code> to indicate which paths are a directory (end in /).</p>
<p><code>$ cd ~/Desktop/shell_intro</code><br />
<code>$ ls -F</code></p>
<p>returns output</p>
<p><code>brainstorm.txt   data/    draft/</code></p>
<p>You can also use <code>ls</code> to look at the contents of directories that are NOT the<br />
working directory. For example,</p>
<p><code>$ ls data</code></p>
<p>will return the contents of the <code>data</code> directory, which is a subfolder of the<br />
current working directory <code>shell_intro</code>. To view the contents of a folder that<br />
is not a subfolder of the current directory, use <code>ls</code> with the full path.</p>
<p>There are several commands you can use to view the contents of a file:</p>
<p><code>cat</code> prints the entire contents of the file<br />
<code>head</code> prints the first lines of the file (default is 10 lines).<br />
<code>tail</code> prints the last lines of the file (default is 10 lines).</p>
<p>Both <code>head</code> and <code>tail</code> can be modified using the <code>-n</code> option to specify the number<br />
of lines to print. To print the first five lines of the file ’brainstorm.txt`:</p>
<p><code>$ head -n 5 brainstorm.txt</code></p>
<p>For large files, an alternative to <code>cat</code> is <code>less</code> which opens the file as a<br />
read-only copy and allows you to navigate the file, using the same tools as for<br />
the <code>man</code> help pages.</p>
</div>
<div id="creating-files-and-directories" class="section level3">
<h3>Creating files and directories</h3>
<p>The command to create a new directory is <code>mkdir</code>. You can create multiple directories<br />
in a hierarchy by specifying the full path. For example, if the working directory<br />
is <code>shell_intro</code> on the desktop,</p>
<p><code>$ mkdir figs</code> creates a directory <code>figs</code> within the current directory, whereas<br />
<code>$ mkdir figs/high-res/</code> creates two new directories, <code>high-res</code> inside <code>figs</code>.</p>
<p>Note, there is no output from <code>mkdir</code> but you can check it worked with <code>ls</code>.</p>
<p>You can use the command <code>touch</code> to create an empty file.</p>
<p><code>$ touch my_file.txt</code></p>
<p>creates an empty text file in the current directory.</p>
<p>You can also use a text editor to create files. Using the text editor Nano,</p>
<p><code>$ nano abstract.txt</code></p>
<p>will create a file called <code>abstract.txt</code> and open that file in the Nano text editor.</p>
<p>You can type some sample text in the file, then hit <kbd>Ctrl</kbd> + <kbd>X</kbd> to exit. Nano will ask<br />
if you want to save the changes. Type <kbd>Y</kbd> and then <kbd>Enter</kbd> to save changes.</p>
</div>
<div id="moving-and-copying-files" class="section level3">
<h3>Moving and copying files</h3>
<p>To copy files or directories, use the <code>mv</code> command. Specify the file to move<br />
and the new destination. For example,</p>
<p><code>$ mv brainstorm.txt draft</code></p>
<p>will move the file <code>brainstorm.txt</code> into the <code>draft</code> folder. What if you want to<br />
move the file back to the main <code>shell_intro</code> folder?</p>
<p><code>$ mv draft/brainstorm.txt .</code></p>
<p>will identify the file based on the path and move it to the current directory<br />
(using <code>.</code> as the shortcut for the current directory)</p>
<p class="text-success">
Note, <code>mv</code> will overwrite any existing files with the same name! Double-check<br />
names before moving files, or use <code>mv -i</code>, the interactive option which will<br />
ask you before overwriting existing files.
</p>
<p>To copy files or directories, use the <code>cp</code> command, which is similar to <code>mv</code>.<br />
Specify the file or directory to copy and the location for the copy. To create<br />
a duplicate, such as a back-up file, you can simply specify a new name in the<br />
current directory as follows:</p>
<p><code>$ cp abstract.txt abstract_backup.txt</code></p>
<p>will create a second copy of your text file, named <code>abstract_backup.txt</code></p>
</div>
<div id="deleting-files-and-directories" class="section level3">
<h3>Deleting files and directories</h3>
<p>Deleting files is easy using the <code>rm</code> command.</p>
<p><code>$ rm abstract_backup.txt</code></p>
<p>will remove the second text file you just created.</p>
<p class="text-success">
Caution, there’s no ‘undo’ for deleting files! Use the <code>-i</code> option to give an<br />
interactive confirmation you want to remove a file.
</p>
<p>Deleting directories requires using an option with <code>rm</code>. The <code>-d</code> option will<br />
allow for removing directories, but again with no warning. Combine the <code>-d</code> with<br />
<code>-i</code> to get an interactive warning before deleting.</p>
<p><code>$ rm -d -i data/figs/high-res</code></p>
<p>will first ask if you want to delete the <code>high-res</code> directory. Hit <kbd>Y</kbd> to confirm.</p>
<br>
<p>
<button type="button" class="btn btn-default btn-workflowr btn-workflowr-sessioninfo" data-toggle="collapse" data-target="#workflowr-sessioninfo" style="display: block;">
<span class="glyphicon glyphicon-wrench" aria-hidden="true"></span> Session information
</button>
</p>
<div id="workflowr-sessioninfo" class="collapse">
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>R version 4.1.1 (2021-08-10)
Platform: x86_64-apple-darwin17.0 (64-bit)
Running under: macOS Big Sur 10.16

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.0.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] workflowr_1.6.2

loaded via a namespace (and not attached):
 [1] Rcpp_1.0.7       rprojroot_2.0.2  digest_0.6.28    later_1.3.0     
 [5] R6_2.5.1         git2r_0.28.0     magrittr_2.0.1   evaluate_0.14   
 [9] stringi_1.7.4    rlang_0.4.11     fs_1.5.0         promises_1.2.0.1
[13] jquerylib_0.1.4  rmarkdown_2.11   tools_4.1.1      stringr_1.4.0   
[17] glue_1.4.2       yaml_2.2.1       httpuv_1.6.3     xfun_0.26       
[21] fastmap_1.1.0    compiler_4.1.1   htmltools_0.5.2  knitr_1.36      </code></pre>
</div>
</div>
</div>


<!-- Adjust MathJax settings so that all math formulae are shown using
TeX fonts only; see
http://docs.mathjax.org/en/latest/configuration.html.  This will make
the presentation more consistent at the cost of the webpage sometimes
taking slightly longer to load. Note that this only works because the
footer is added to webpages before the MathJax javascript. -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>




</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
